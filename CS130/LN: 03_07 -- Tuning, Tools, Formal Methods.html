<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.0.2 (456266)"/><meta name="author" content="NIKOLA SAMARDZIC"/><meta name="created" content="2018-03-09 04:22:16 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-03-13 21:47:55 +0000"/><title>LN: 03/07 -- Tuning, Tools, Formal Methods</title></head><body><div/><hr/><div><span style="font-weight: bold;"><font face="Times New Roman" style="font-size: 12px;">Lecture Notes: March 7 — Tuning, Tools, Formal methods</font></span></div><hr/><div><span style="font-weight: bold;"><font face="Times New Roman" style="font-size: 12px;">Tuning</font></span></div><ul><li><font face="Times New Roman" style="font-size: 12px;">Programmers’ intuitions are notoriously bad</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">this wastes development effort</font></li><li><font face="Times New Roman" style="font-size: 12px;">tuned code is harder to maintain</font></li><li><font face="Times New Roman" style="font-size: 12px;">don’t worry about tuning until later (opposite of security)</font></li><li><font face="Times New Roman" style="font-size: 12px;">Intuition, even when correct, degrades quickly with time</font></li><li><font face="Times New Roman" style="font-size: 12px;">Intuitions about platforms will be wrong and not general</font></li><li><font face="Times New Roman" style="font-size: 12px;">So: <span style="text-decoration: underline;">measure</span> (BUT, watch out for measurement errors and overheads)</font></li></ul><li><font face="Times New Roman" style="font-size: 12px;">Combining tuning techniques produces multiplicative gains</font></li><li><font face="Times New Roman" style="font-size: 12px;">Pareto principle applies</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">Find biggest bottleneck</font></li><li><font face="Times New Roman" style="font-size: 12px;">Tune it</font></li><li><font face="Times New Roman" style="font-size: 12px;">Measure results</font></li><li><font face="Times New Roman" style="font-size: 12px;">Repeat</font></li></ul><li><font face="Times New Roman" style="font-size: 12px;">Obsolescent (?) advice</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">Write your code in assembly</font></li><li><font face="Times New Roman" style="font-size: 12px;">‘register’ keyword in C — hint to compiler to keep variable in register (less important with modern compilers)</font></li><li><font face="Times New Roman" style="font-size: 12px;">‘inline’ — to avoid overhead of call and return (again, irrelevant with modern compilers)</font></li><li><font face="Times New Roman" style="font-size: 12px;">‘final’ in Java — inlines variable values since it knows they won’t change</font></li></ul></ul><div><font face="Times New Roman" style="font-size: 12px;"><br/></font></div><div><span style="font-weight: bold;"><font face="Times New Roman" style="font-size: 12px;">Tuning tactics</font></span></div><ul><li><font face="Times New Roman" style="font-size: 12px;">Do something 0 times instead of 1 time</font></li><li><font face="Times New Roman" style="font-size: 12px;">Sentinels</font></li><li><font face="Times New Roman" style="font-size: 12px;">Compute values at compile time</font></li><li><font face="Times New Roman" style="font-size: 12px;">Do something once, instead of many times</font></li><li><font face="Times New Roman" style="font-size: 12px;">Substitute code</font></li><li><font face="Times New Roman" style="font-size: 12px;">Change of data representation</font></li><li><font face="Times New Roman" style="font-size: 12px;">Parallelize</font></li><li><font face="Times New Roman" style="font-size: 12px;">Synchronization bugs</font></li><li><font face="Times New Roman" style="font-size: 12px;">I/O problems</font></li><li><font face="Times New Roman" style="font-size: 12px;">Avoid system calls</font></li><li><font face="Times New Roman" style="font-size: 12px;">Avoid network access</font></li><li><font face="Times New Roman" style="font-size: 12px;">Location of computation might be changed</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">put it on good CPIs to increase throughput</font></li><li><font face="Times New Roman" style="font-size: 12px;">put it where the results of the computation will be immediately used to lower latency</font></li></ul></ul><div><font face="Times New Roman" style="font-size: 12px;"><br/></font></div><div><span style="font-weight: bold;"><font face="Times New Roman" style="font-size: 12px;">Formal method</font></span></div><ul><li><font face="Times New Roman" style="font-size: 12px;">Problems with informal specs:</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">Contradictions (due to over specification — always caused by errors)</font></li><li><font face="Times New Roman" style="font-size: 12px;">Ambiguities</font></li><li><font face="Times New Roman" style="font-size: 12px;">Vaguenesses</font></li><li><font face="Times New Roman" style="font-size: 12px;">Incomplete specs</font></li></ul><li><font face="Times New Roman" style="font-size: 12px;">Ambiguities, Vaguenesses, Incomplete specs due to underspecification and are sometimes deliberate</font></li><li><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font face="Times New Roman" style="font-size: 12px;">Standard ideas of formal methods:</font></span></li><ul><li><font face="Times New Roman" style="font-size: 12px;"><span style="font-style: italic;">Invariant.</span> Condition that should always be true</font></li><li><font face="Times New Roman" style="font-size: 12px;"><span style="font-style: italic;">Precondition.</span> Only has to be true on entry to well-defined piece of code</font></li><li><font face="Times New Roman" style="font-size: 12px;"><span style="font-style: italic;">Postcondition</span>. Only has to be true on exit from well-defined piece of code</font></li></ul><li><font face="Times New Roman" style="font-size: 12px;">Spec languages</font></li><ul><li><font face="Times New Roman" style="font-size: 12px;">not executed</font></li><li><font face="Times New Roman" style="font-size: 12px;">don’t need to be efficient</font></li><li><font face="Times New Roman" style="font-size: 12px;">don’t need to be computable</font></li><li><font face="Times New Roman" style="font-size: 12px;">can be tailored to a domain</font></li></ul><li><font face="Times New Roman" style="font-size: 12px;">2 kinds of spec languages</font></li><ul><li><span style="font-weight: bold;"><font face="Times New Roman" style="font-size: 12px;">simple algebraic:</font></span></li><ul><li><span style="text-decoration: underline;"><font face="Times New Roman" style="font-size: 12px;">signatures</font></span></li><ul><li><font face="Times New Roman" style="font-size: 12px;">Create -&gt; List</font></li><li><font face="Times New Roman" style="font-size: 12px;">Cons(Elem, List) -&gt; List</font></li><li><font face="Times New Roman" style="font-size: 12px;">Head(List) -&gt; Elem</font></li><li><font face="Times New Roman" style="font-size: 12px;">Tail(List) -&gt; List</font></li></ul><li><span style="text-decoration: underline;"><font face="Times New Roman" style="font-size: 12px;">axioms</font></span></li><ul><li><font face="Times New Roman" style="font-size: 12px;">For all v, l, Head(Cons(v, l)) = v</font></li><li><font face="Times New Roman" style="font-size: 12px;">For all v, l, Tail(Cons(v, l)) = l</font></li></ul></ul></ul></ul><div><br/></div></body></html>
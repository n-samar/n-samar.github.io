<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.0.2 (456266)"/><meta name="author" content="NIKOLA SAMARDZIC"/><meta name="created" content="2018-03-09 05:32:13 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-03-09 05:32:33 +0000"/><title>Ch 5 -- Link Layer</title></head><body><div><br/></div><hr/><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Chapter 5: Link Layer</span></div><hr/><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Node</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — any device that runs a link layer protocol (hosts, routers, switches, WiFi access points)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Links </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">— communication channels that connect adjacent nodes along the communication path</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Over a given link, a transmitting node encapsulates the datagram in a </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">link-layer frame</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> and transmits the frame into the link.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Possible services provided by the link layer:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Framing</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. A frame consists of data fields, in which the network-layer datagram is inserted, and a number of header fields.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Link access</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Medium Access Control (MAC)</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> protocol specifies the rules by which a frame is transmitted onto the link.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Reliable delivery</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. Guarantees that each network-layer datagram will be moved successfully across the link.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Error detection and correction</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. Done by including error detection bits in the frame. Detection is usually performed on the hardware level.</span></li></ul></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Where is the Link Layer Implemented?</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Mostly in </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">network adapters</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">, a.k.a. </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">network interface cards (NIC)</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. So, mostly in hardware.</span></li></ul><div><img src="Ch%205%20--%20Link%20Layer.resources/Screen%20Shot%202018-03-01%20at%209.53.34%20AM.png" height="360" width="494"/></div><div><br/></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Bit error detection may not always work</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Forward error correction (FEC) </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">— ability of receiver to both detect and correct bit errors</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Parity Checks</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">What if even number of errors occurs?</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">two-dimensional parity scheme</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Checksums</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Internet checksum</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: bytes of data are treated as 16-biy integers and summed. The checksum is the 1s complement of the sum.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Cyclic Redundancy Check (CRC)</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Transport layer uses internet checksums for error detection because checksumming can be implemented fast in the OS</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Since the link layer is implemented in hardware, it has a dedicated hardware component that computes CRC values. This allows for fast CRC computations that would be impossible in the OS.</span></li></ul></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Multiple Access Links and Protocols</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Point-to-point link</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: single sender at one end of the link and single receiver at the other end.</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">High-Level Data Link Control (HDLC)</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> protocol</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Point-to-point protocol (PPP)</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Broadcast link</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: multiple sending and receiving nodes all connected to the same, single, shared broadcast channel.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Multiple access problem</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: How to coordinate the access of multiple sending and receiving nodes to a shared broadcast channel.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Desirable properties of multi-access transmission (for an R bps link):</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When only one node has data to send, the node has a throughput of R bps</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When M nodes have data to send, each of these nodes has a throughput of R/M bps.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The protocol is decentralized; </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">i.e.</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> there is no master node that represents a single point of failure.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The protocol is simple, so that it is inexpensive to implement.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Channel Partitioning Protocols</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Use </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">time-division</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> or </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">frequency division multiplexing</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Disadvantage: A single node can never get throughput better than R/N (where N is the total number of nodes connected to the link)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Code Division Multiple Access (CMDA)</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">assign different code to each node</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">different nodes can transmit simultaneously and have their respective receivers correctly receive a sender’s encoded data bits inspire of interfering transmission by other nodes.</span></li></ul></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Random Access Protocol</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">A transmitting node always transmits at the full rate of the channel.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When there is a collision, each node involved in the collision repeatedly retransmits its frame until its frame gets through without collision.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When collision happens, node need to retransmit immediately. Instead it </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">waits a random delay</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Slotted ALOHA protocol</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Assumptions</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">All frames consist of exactly L bits</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Time is divided into slots of size L/R seconds</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Nodes start to transmit frames only at the beginning of slots</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If two or more frames collide in a slot, then all the nodes detect the collision event before the slot ends.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each node runs the following algorithm:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When he node has a fresh frame to send, it waits until the beginning of the next slot and transmits the entire frame in the slot</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If there isn’t a collision, the node has successfully transmitted its frame and thus need not consider retransmitting the frame.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If there is a collision, the node detects the collision before the end of the slot. The node retransmits its frame in each subsequent slot with some fixed probability p until the frame is transmitted without a collision.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">Successful slot</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — a time slot that is not wasted (that is, no collision occur and exactly one packet is transmitted)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Probability of any slot being successful: p * (1-p)^[N-1]</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Efficiency (expected number of successful slots per slot): N * p * (1-p)^[N-1]</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Assuming infinite number of of nodes that want to transmit, the effective transmission rate of the channel will be 37%.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Pure ALOHA</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: Same as slotted, but no slots, have node transmit immediately once there is a packet it can transmit. Maximum efficiency assuming infinite nodes: half of slotted ALOHA.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Carrier Sense Multiple Access (CSMA)</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Carrier sensing </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">— the ability to listen to a channel to see if it is occupied before sending data through it.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Collision detection </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">— If somebody starts transmitting over you and colliding with your packets, you know about it.</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Channel propagation delay </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">— the time it takes for a signal to propagate from one of the nodes to another (plays a crucial role in CSMA effectiveness)</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Carrier Sense Multiple Access with Collision Detection (CSMA/CD)</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The algorithm on each of the routers’ adapters:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The adapter obtains a datagram from the network layer, prepares a link-layer frame, and puts the frame adapter buffer</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If the adapter senses that the channel is idle, it starts to transmit the frame. If the channel is busy, it waits until it is free.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">While transmitting, the adapter monitors for the presence of signal energy coming from other adapters</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If the adapter detects signal energy from other adapters while still transmitting, it aborts the transmission</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">After aborting, the adapter waits a random amount of time and then returns to step 2.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Binary exponential back off</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: Defines how the random waiting time after abort is established. The values are reset for every new packet</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Efficiency (amount of time packets are transmitted without collisions): 1 / [1 + 5 * d_prop / d_trans]</span></li></ul></ul></ul></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Taking-Turns Protocols</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Round robin polling of each node by a dedicated master node.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">token-passing protocol: </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">A small, special-purpose frame is exchanged among the nodes in some fixed order.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">DOCSIS: The Link-Layer Protocol for Cable Internet Access</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">A cable access network typically connects several thousand residential cable modems to a cable modem termination system (CMTS) at the cable network headend.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Uses </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">frequency division multiplexing </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">for both downstream and upstream packets</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Upstream direction is harder to manage because multiple modems share it.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each upstream channel is divided into intervals of time (TDM-like) called </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">mini-slots</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. The CMTS explicitly grants permission to individual cable modems to transmit during specific mini-slots. </span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">This is done via the MAP downstream message that CMTS sends to the modem.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Modems can send </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">mini-slot-request </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">frames to the CMTS to request a time slot when they have data to send.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">A cable modem can neither sense whether the upstream channel is busy nor detect collisions. Instead it infers that its mini-slot-request frame experienced a collision if it does not receive a response to the requested allocation in the next downstream control message. Then the modem uses binary exponential back off.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Switched Local Area Network</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Since switches operate on the link-layer, they don’t recognize network-layer addresses, and don’t use routing algorithms like RIP or OSPF to determine paths through the network of layer-2 switches.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Link Layer Addressing and ARP</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Hosts and routers have link-layer addresses (specifically, these are the addresses of their adapters).</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Address Resolution Protocol (ARP)</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — translates IP addresses to link-layer addresses</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">MAC Addresses</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Link-layer addresses are called </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">LAN addresses, physical addresses, or MAC addresses.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MAC address is usually 6 bytes long (usually expressed in hexadecimal notation)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MAC addresses are usually permanent and we will assume that from here on.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">No two adapters have the same address. MAC address space is managed by IEEE.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">When an adapter sends a link-layer message, it inserts the destination adapter’s MAC address into the frame and sends the frame into the LAN.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MAC (like IP) have a </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">broadcasting address</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. </span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Why do we have both MAC and IP addresses?</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">LANs are designed for arbitrary network-layer protocols, not just for IP and the Internet.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If adapters were to use network-layer addresses instead of MAC addresses, the network-layer address would have to be stored in the adapter RAM and reconfigured every time the adapter was moved.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If we were to use IP addresses in the link layer and not have any adapter addresses at all, we would have to query the network-layer process for which way the data should be sent. This would interrupt every host by every frame sent on the LAN, including by frames that were destined for other hosts on the same broadcast LAN.</span></li></ul></ul><div><img src="Ch%205%20--%20Link%20Layer.resources/Screen%20Shot%202018-03-01%20at%2012.45.07%20PM.png" height="461" width="671"/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Address Resolution Protocol (ARP) Page 492</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Provides translation from MAC to IP addresses</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">ARP module located in the sending host translates IP addresses of any host within the same LAN into MAC addresses.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">ARP table entries also contain a Time-To-Live (TTL)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">ARP Packet</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — used to query all the other hosts and routers on the subnet to determine the MAC address corresponding to the IP address that is being resolved. The first host to have the appropriate mapping associated to the queried IP address sends it back with the associated MAC address.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Ethernet</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">By far the most prevalent LAN technology.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Use a star-like shape, with central </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">hub</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — a physical layer device that acts on individual bits rather than frames amplifying them. Later this hub was replaced by a </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">switch</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> because it is:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">collision-less</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">bona-fide store-and-forward packet switch (but unlike routers, operates on layer 2)</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Six fields in an ethernet frame:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Data field</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> (46-1,500 bytes) The IP datagram. MTU of Ethernet is 1,500 bytes.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Destination address</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> (6 bytes) MAC address of destination.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Source address</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> (6 bytes) MAC address of source adapter.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Type field</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> (2 bytes) Specifies the network protocol that is encapsulated.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Cyclic redundancy check (CRC)</span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;"> </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">(4 bytes)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Preamble</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> (8 bytes) Always the same. The first seven bytes are used to synchronize the receiver’s clock with the sender (the sender sends packets at regular intervals with the period depending on which version of IP is used; sometimes the sending doesn’t fall into perfect intervals, so the receiver must be resynchronized). The last 2 bits of the last byte alert the receiver that actual stuff is coming after them.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches now are full-duplex (meaning communication can go from switch to host and from shot to switch at the same time). So in a switch based Ethernet LAN there are no collisions, and no need for MAC protocol.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Link-Layer Switches</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The role of the switch is to receive incoming link-layer frames and forward them onto outgoing links.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches are </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">transparent to hosts</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">, i.e. a host/router addresses a frame to another host/router and happily sends the frame into the LAN, unaware that a switch will be receiving the frame and forwarding it.</span></li></ul><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; text-decoration: underline;">Forwarding and Filtering</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Filtering</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> determines whether a frame should be forwarded to some interface or should just be dropped.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Forwarding</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> is the switch function that determines the interface to which a frame should be directed, and then moves the frame to those interfaces.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Filtering and forwarding in switches is done through </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">switch tables</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. An entry in the switch table contains:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">a MAC address</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">the switch interface that leads towards that MAC address</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">the time at which the entry was placed in the table</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The algorithm that the switch implements goes as follows:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If the incoming packet’s destination MAC is not in the switch table, the packet is broadcast to all other interfaces.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If the incoming packet’s destination MAC is in the switch table, and the switch table specifies the same interface as the one the packet came from, the packet is discarded</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">If the incoming packet’s destination MAC is in the switch table, and the switch table specifies a different interface than the one the packet came from, forward the packet to that interface.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Self-learning</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">: property of switches to build the switch table automatically, dynamically, and autonomously. This capability is established as follows:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The switch table is initially empty</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">For each incoming frame received on an interface, the switch stores in its table</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The MAC address in the frame’s source address field</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The interface from which the frame arrived</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The current time</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The switch deletes an address in the table if no frames are received with that address as the source address after some period of time (the </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">aging time</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">). In this manner, if a PC is replaced by another PC (with a different adapter), the MAC address of the original PC will eventually be purged from the switch table.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Due to </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">self-learning</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> the switches are </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">plug-and-play devices</span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic;">. </span></li></ul><div><br/></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Properties of Link-Layer Switching:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Elimination of collision</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. In a LAN built from switches (and without hubs), there is no wasted bandwidth due to collisions! The switches buffer frames and never transmit more than one frame on a segment at any one time.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Heterogeneous links</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. Since a switch isolates one link from another, the different links in the LAN can operate at different speeds and can run over different media. Thus, a switch can be used for mixing legacy with newer equipment.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Management</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. Network management is easier.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches vs Routers:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Routers are layer-3 packet switches</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches are layer-2 packet switches</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches are plug and play and have relatively high filtering and forwarding rates</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Large switched network would require large ARP tables in the hosts and routers would generate substantial ARP traffic and processing.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches must be acyclic to prevent infinite ARP traffic</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Switches are susceptible to broadcast storms where a single adapter broadcasts messages continuously.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Routers can provide firewall protection against layer-2 broadcast storms.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Routers are not plug-and-play, they and the hosts that connect to them need their IP addresses to be configured.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Routers have a larger per packet processing time than switches.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">A few hundred hosts could be successfully managed by a switch without the loss in throughput and configuration work associated with routers.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">However, for networks with thousands of hosts, routers are necessary. The routers provide a more robust isolation of traffic, control broadcast storms, and use more intelligent routes among the hosts in the network.</span></li></ul></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Virtual Local Area Network (VLANs)</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The hierarchical approach to LAN configuration has the following drawbacks:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Lack of traffic isolation</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. Although the hierarchy localizes group traffic to within a single switch, broadcast traffic must still traverse the entire institutional network. For security/privacy and performance limiting this traffic is crucial.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Inefficient use of switches</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. First-level switches provide 96 ports, and it is hard to get a set of associated hosts to be close to this size.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-style: italic; text-decoration: underline;">Managing users</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">. If an employee moves between groups, the physical cabling must be changed to connect the employee to a different switch.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">This issues can be addressed with VLAN. It allows multiple virtual local area networks to be defined over a single physical local are network infrastructure. </span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Hosts within a VLAN communicate with each other as if they were connected to the switch.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The network manager can change the port-to-VLAN mapping through software.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">The switch producers build a router into the switch, so that the different VLANs can be connecting with each other through this router.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">VLAN trunking</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> — In the VLAN trunking approach shown in Figure 5.26(b), a spe-
cial port on each switch (port 16 on the left switch and port 1 on the right switch) is
configured as a trunk port to interconnect the two VLAN switches. The trunk port
belongs to all VLANs, and frames sent to any VLAN are forwarded over the trunk
link to the other switch. Using </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">VLAN tags</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">, the receiving switch knows which VLAN the packet belongs to.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';"> VLAN tag consists of 2 bytes of </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Tag Protocol Identifier (TPID) field</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> containing the value 81-00, a 2-byte Tag Control Information field that contains a 12-bit VLAN identifier field, and a 3-bit priority field that is similar in intent to the IP datagram TOS field.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Link Virtualization: A Network as a Link Layer</span></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; text-decoration: underline;">Multiprotocol Label Switching (MPLS)</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Goal: improve the forwarding speed of IP routers by adopting a key concept from the world of virtual-circuit networks: a fixed-length label.</span></li></ul><div><img src="Ch%205%20--%20Link%20Layer.resources/Screen%20Shot%202018-03-01%20at%208.27.06%20PM.png" height="189" width="558"/></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">An MPLC-enabled router (</span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">label-switched router</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">) forwards an MPLS frame by looking up the MPLS
label in its forwarding table and then immediately passing the datagram to the
appropriate output interface.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Thus, the MPLS-capable router need not extract the destination IP address and perform a lookup of the longest prefix match in the forwarding table.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MPLS most importantly provides many different paths between hosts. Thus traffic between hosts could be sent through multiple paths depending on performance or policy.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MPLS can be used to implement </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Virtual Private Networks (VPNs)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">MPLS is increasingly important in today’s Internet.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Data Center Networking</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Companies build massive data centers.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each data center has its own </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">data center network </span><span style="font-size: 12px; font-family: 'Helvetica Neue';">that interconnects its hosts with each other and interconnects the data center with the Internet.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">$12 million per month operational cost of 100,000 host data center.</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">45% of cost is in host replacement</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">25% infrastructure cost (transformers, uninterrupted power supply (UPS) systems, generators for long-term outages, and cooling systems)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">15% for electric utility costs</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">15% for networking, including network gear (switches, routers, and load balancers), external links, and transit traffic costs.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Hosts in data centers are called </span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">blades</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Blades</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> are stacked into racks (20-40 blades each)</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each rack has a switch (</span><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Top of Rack (TOR) switch</span><span style="font-size: 12px; font-family: 'Helvetica Neue';">), that interconnects the hosts in the rack with each other and with other switches in the data center.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each host has a network interface card that connects to its rack’s TOR switch.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Each host has an data-center-internal  IP address.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Two types of traffic:</span></li><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">traffic flowing from internal hosts and external clients</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">traffic flowing between internal hosts.</span></li></ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Border routers</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> route data to and from external clients.</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Load Balancing</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">External client requests first directed to load balancer.</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Also provide NAT like functionality: translating the externally visible datacenter IP to the specific host’s IP</span></li><li><span style="font-size: 12px; font-family: 'Helvetica Neue';">Big issue: Very limited information flow throughput between hosts in different racks (hosts within a single rack are usually connected with a 1 Gbps link, but the TORs of each rack are connected with a 10 Gbps link to the rest of the center, which may not be enough)</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Trends in Data Center Networking</span></div><ul><li><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">Fully connected topology</span><span style="font-size: 12px; font-family: 'Helvetica Neue';"> for improving host-to-host communication (vs. hierarchical topology).</span></li></ul><div><br/></div><div><span style="font-size: 12px; font-family: 'Helvetica Neue'; font-weight: bold;">READ THROUGH CHAPTER 5.7 A RETROSPECTIVE!!!</span></div></body></html>